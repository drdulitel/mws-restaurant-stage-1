<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Main CSS file -->

  <link rel="stylesheet" href="css/styles_restaurant.css">
  <link rel="stylesheet" href="css/styles_media_max350.css" media="(max-width: 350px)">
  <link rel="stylesheet" href="css/styles_media_min351max600.css" media="(min-width: 351px) and (max-width: 600px)">
  <link rel="stylesheet" href="css/styles_media_min601max700.css" media="(min-width: 601px) and (max-width: 700px)">
  <link rel="stylesheet" href="css/styles_media_min701max900.css" media="(min-width: 701px) and (max-width: 900px)">
  <link rel="stylesheet" href="css/styles_media_min901.css" media="(min-width: 901px)">

  <!-- Normalize.css for better cross-browser consistency -->
  <!--<link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" />-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#673AB6">
  <title>Restaurant Info</title>
  <link rel="manifest" href="/manifest.json">
</head>

<body class="inside">
  <!-- Beginning header -->
  <header>
    <!-- Beginning nav -->
    <nav>
      <h1><a href="/" >Restaurant Reviews</a></h1>
    </nav>
    <!-- Beginning breadcrumb -->
    <nav id="breadcrumb" aria-label="breadcrumb">
      <ul>
        <li><a href="/">Home</a></li>
      </ul>
    </nav>
    <!-- End breadcrumb -->
    <!-- End nav -->

  </header>
  <!-- End header -->

  <!-- Beginning main -->
  <main id="maincontent">

    <!-- Beginning restaurant -->
    <section id="restaurant-container">
      <!-- Beginning favorite -->
      <div id="fav_wrapper"><img id="star" data-fav = 0></div>
      <!-- End favorite -->
      <h2 id="restaurant-name"></h2>

      <!--<picture id="restaurant-picture">-->
        <img id="restaurant-img">
      <!--</picture>-->

      <div id="restaurant-info-wrapper">
        <p id="restaurant-cuisine"></p>
        <p id="restaurant-address"></p>
        <table id="restaurant-hours"></table>
      </div>
    </section>
    <!-- end restaurant -->
    <!-- Beginning map -->
    <section id="map-container" role="application" aria-label="map">
      <img id = "static_map" onclick="swap_map()" alt="click to interactive map"
           src="https://maps.googleapis.com/maps/api/staticmap?center=40.722216,-73.987501&zoom=13&size=600x300&scale=2&format=jpg&maptype=roadmap
                &key=AIzaSyArp4s6XFCGD1Z0ifhFFEEIXx6qPW1APe4">
      <div id="map"></div>
    </section>
    <!-- End map -->
    <!-- Beginning reviews -->
    <section id="reviews-container">
      <ul id="reviews-list"></ul>
      <div class="formWrapper">
        <form action="#" method="POST" id="submitReviewForm">
          <label for="reviewerName"></label>
          <input type="text" id = "reviewerName" name = "name" placeholder = "Enter your name" aria-label="Enter your name" aria-required="true" required>
          <div id="errorMsg">Please fill your name</div>
          <label for="reviewText"></label>
          <textarea rows="4" cols="50" id = "reviewText" placeholder = "Enter your review" aria-label="Enter your review"></textarea>
          <div id="ratingWrapper">
            <div id="labelWrapper"><label for="ratingSelect" id="ratingLabel">Choose your rating</label></div>
            <select id="ratingSelect">
              <option class="rating_5" value = "5" selected="selected" >5</option>
              <option class="rating_4" value = "4" >4</option>
              <option class="rating_3" value = "3" >3</option>
              <option class="rating_2" value = "2" >2</option>
              <option class="rating_1" value = "1" >1</option>
            </select>
          </div>
          <div id="submitWrapper">
            <input id="submitId" type = "button" value = "Submit">
            <!--<input id="submitId" type = "button" value = "Submit" onclick="submitReview()">-->
          </div>
        </form>

      </div>
    </section>
    <!-- End reviews -->
    <!-- Beginning footer -->
    <footer id="footer">
      Copyright (c) 2017 <a href="/"><strong>Restaurant Reviews</strong></a> All Rights Reserved.
    </footer>
    <!-- End footer -->
  </main>
  <!-- End main -->

  <!-- Beginning scripts -->
  <!-- Database helpers -->

  <script async defer type="text/javascript" src="js/dbhelper.js"></script>
  <script async defer type="text/javascript" src="js/idb.js"></script>
  <script async defer type="text/javascript" src="js/restaurant_info.js"></script>
  <!-- Main javascript file -->

  <!-- Google Maps -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArp4s6XFCGD1Z0ifhFFEEIXx6qPW1APe4&libraries=places&callback=initMap"></script>


  <script>


      if('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
              navigator.serviceWorker.register('/sw.js').then(function(registration) {
                  console.log('ServiceWorker registration successful');
/*                  if ('sync' in registration) {
                      var form = document.getElementById('submitReviewForm');
                      const reviewerName = form.querySelector('#reviewerName');
                      const reviewText = form.querySelector('#reviewText');
                      const rating = form.querySelector('#ratingSelect');

                      var submitButton = document.getElementById('submitId');

                      submitButton.addEventListener('click', function(event) {
                          console.log('submit review');
                          event.preventDefault();

                          var review = {
                              restaurant_id: '',
                              name: reviewerName.value,
                              rating: rating.value,
                              comments: reviewText.value,
                          };
                          DBHelper.addReview(review);

                          submitReview();
                          reviewerName.value = '';
                          reviewText.value = '';
                          rating.value = 5;

                        //  if (!navigator.onLine){
                          //    return registration.sync.register('review');
                        //  }
                      });
                  }*/
              }).catch(function(error) {
                  console.log('ServiceWorker registration failed: ', error);
              });
          });
      }
  </script>

  <!-- End scripts -->
</body>
</html>
